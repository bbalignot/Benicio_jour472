arrange(desc(Diff_Pct_2020)
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020))
#Produce a second table with the top 25 places ranked by the lowest or negative percentage change.
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020)
#Produce a second table with the top 25 places ranked by the lowest or negative percentage change.
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020))
#Produce a second table with the top 25 places ranked by the lowest or negative percentage change.
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020))
#Produce a second table with the top 25 places ranked by the lowest or negative percentage change.
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(Diff_Pct_2020))
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020))
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(Diff_Pct_2020))
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(Diff_Pct_2020)
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020))
head()
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020)) %>%
head()
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020)) %>%
head(place, n=25)
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020)) %>%
head(Diff_Pct_2020, n=25)
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(Diff_Pct_2020)
head(Diff_Pct_2020, n=25)
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(Diff_Pct_2020)
head(n=25)
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(Diff_Pct_2020)
md_city_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(Diff_Pct_2020) %>%
head(Diff_Pct_2020, n = 25)
city_md_income <- read_csv("city_md_income.csv") %>%
as.data.frame()
city_md_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Income = (median_inc_2020-median_inc_2010)) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(Diff_Pct_2020)
city_md_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(desc(Diff_Pct_2020)) %>%
head(Diff_Pct_2020, n=25)
city_md_income %>%
select(place, median_inc_2010, median_inc_2020) %>%
mutate(Diff_Pct_2020 = round((median_inc_2020-median_inc_2010)/median_inc_2010*100,2)) %>%
arrange(Diff_Pct_2020) %>%
head(Diff_Pct_2020, n = 25)
city_md_income %>%
summary(city_md_income)
city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= "63327" ~ 'above'
median_inc_2020 <= "63327" ~ 'below'
city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= 63327 ~ 'above'
median_inc_2020 <= 63327 ~ 'below'
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= "63327" ~ 'above'
median_inc_2020 <= "63327" ~ 'below'
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= '63327' ~ "above"
median_inc_2020 <= '63327' ~ "below"
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 > '63327' ~ "above"
median_inc_2020 < '63327' ~ "below"
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= '63327' ~ "above",
median_inc_2020 <= '63327' ~ "below"
)
)
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= '63327' ~ "above",
median_inc_2020 <= '63327' ~ "below"
)
)
lowest %>%
select(place, median_inc_2020) %>%
head()
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= '63327' ~ "above",
median_inc_2020 <= '63327' ~ "below"
)
)
lowest %>%
select(place, median_inc_2020) %>%
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= '63327' ~ "above",
median_inc_2020 <= '63327' ~ "below"
)
)
lowest %>%
select(place, median_inc_2020)
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= '63327' ~ "above",
median_inc_2020 <= '63327' ~ "below"
)
)
View(lowest)
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= '63327' ~ "above",
median_inc_2020 <= '63327' ~ "below"
)
)
lowest %>%
select(place, median_inc_2020, category) %>%
filter(category = "below")
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= '63327' ~ "above",
median_inc_2020 <= '63327' ~ "below"
)
)
lowest %>%
select(place, median_inc_2020, category) %>%
filter(category == "below")
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= 63327 ~ "above",
median_inc_2020 <= 63327 ~ "below"
)
)
lowest %>%
select(place, median_inc_2020, category) %>%
filter(category == "below")
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= 63327 ~ "above",
median_inc_2020 <= 63327 ~ "below"
)
)
lowest %>%
select(place, median_inc_2020, category) %>%
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= 63327 ~ "above",
median_inc_2020 <= 63327 ~ "below"
)
)
lowest %>%
select(place, median_inc_2020, category)
lowest <- city_md_income %>%
mutate(
category = case_when(
median_inc_2020 >= 63327 ~ "above",
median_inc_2020 <= 63327 ~ "below"
)
)
lowest %>%
select(place, median_inc_2020, category)
library(tidyverse)
SF <- read_csv("assets/data/SF_311.csv")
SF <- read_csv("assets/data/SF_311.csv")
SF <- read_csv("assets/data/SF_311.csv")
SF <- read_csv("SF_311.csv")
View(SF)
#This cleans column names
SF <- janitor::clean_names(SF)
#This processes dates for analysis
SF$call_date2 <- as.Date(SF$call_date)
SF$call_date2 <- lubridate::mdy(SF$call_date)
#This creates a new column for year
SF$year <- lubridate::year(SF$call_date2)
glimpse(SF)
years <- SF %>%
count(year) %>%
group_by(year)
years
years %>%
ggplot() +
geom_bar(aes(x=year, weight=n))
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n))
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n)) +
coord_flip()
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n)) +
coord_flip() +
theme_minimal()
#install.packages('ggthemes')
library(ggthemes)
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n)) +
coord_flip() +
theme_minimal() +
theme_economist()
years %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n)) +
coord_flip() +
theme_minimal() +
theme_economist() +
labs(
title="311 Calls, San Francisco",
x = "total 311 calls",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
years %>%
ggplot(aes(x=year, y=n, weight=n)) +
coord_flip() +
theme_economist() +
geom_col()+
geom_text(aes(label=n), hjust = -.1, size = 2.5) +
labs(
title="311 Calls, San Francisco",
x = "total 311 calls",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
years %>%
ggplot() +
geom_line(aes(x=year, y=n))
days <- SF %>%
count(call_date2)
days
days %>%
ggplot(aes(x = call_date2, y = n, fill = n)) +
geom_bar(stat = "identity") +
labs(title = "311 Calls for Service By Day, San Francisco",
subtitle = "SF PD Service Call Data, 2016-2019",
caption = "Graphic by Wells",
y="Number of Calls",
x="Day")
dispo <- SF %>%
filter(disposition == c("CAN", "CIT", "ADM"))
dispo <- dispo %>%
select(year, disposition) %>%
group_by(year) %>%
count(disposition)
dispo_pivot <- dispo %>%
pivot_wider(names_from = "disposition", values_from = "n") %>%
as.data.frame()
dispo <- SF %>%
filter(disposition == c("CAN", "CIT", "ADM"))
dispo <- dispo %>%
select(year, disposition) %>%
group_by(year) %>%
count(disposition)
dispo_pivot <- dispo %>%
pivot_wider(names_from = "disposition", values_from = "n") %>%
as.data.frame()
ggplot(dispo_pivot, aes(x=year)) +
geom_line(aes(y=ADM), color = "blue") +
geom_line(aes(y=CAN), color = "brown") +
geom_line(aes(y=CIT), color = "green")
ggplot(dispo, aes(year, n, fill = disposition)) +
geom_col(position = "dodge")
arrest -> data.frame(
select(years, dispo)
filter("ARR"")
arrest -> data.frame(
select(years, dispo) %>%
filter("ARR"")
)
arrest -> data.frame(
select(years, dispo) %>%
filter(dispo, "ARR")
)
arrest <- data.frame(
select(years, dispo) %>%
filter(dispo, "ARR")
)
arrest <- data.frame(
select(year, disposition) %>%
filter(dispo, "ARR")
)
arrest <- SF
select(year, disposition) %>%
filter(dispo, "ARR")
View(arrest)
arrest <- SF
select(year, disposition) %>%
filter(disposition, "ARR")
arrest <- SF %>%
select(year, disposition) %>%
filter(disposition, "ARR")
arrest <- SF %>%
select(year, disposition) %>%
filter(disposition == "ARR")
)
arrest <- SF %>%
select(year, disposition) %>%
filter(disposition == "ARR")
arrest <- SF %>%
select(year, disposition) %>%
filter(disposition == "ARR")
View(arrest)
arrest <- SF %>%
select(year, disposition) %>%
filter(disposition == "ARR") %>%
count(disposition)
arrest <- SF %>%
select(year, disposition) %>%
filter(disposition == "ARR") %>%
group_by(year) %>%
summarise(count = sum(disposition == "ARR"))
arrest <- SF %>%
select(year, disposition) %>%
filter(disposition == "ARR") %>%
group_by(year) %>%
summarise(count = sum(disposition == "ARR"))
View(arrest)
arrest %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), weight=n)) +
coord_flip() +
theme_minimal() +
theme_economist() +
labs(
title="Arrests 2016-19, San Francisco",
x = "counts",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
arrest %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), y=n))
arrest %>%
ggplot(arrest) +
geom_bar(aes(x=reorder(year, n), y=n))
arrest %>%
ggplot() +
geom_bar(aes(x=reorder(year, n), y=n))
arrest %>%
ggplot() +
geom_bar(aes(x = reorder(year, n), y = n)) +
coord_flip() +
theme_minimal() +
labs(
title="Arrests 2016-19, San Francisco",
x = "counts",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
arrest %>%
ggplot() +
geom_bar(aes(x = reorder(year, n), y = n, color = "steelblue"))
arrest %>%
ggplot(aes(x=year, y=n, weight=n)) +
coord_flip() +
theme_minimal() +
labs(
title="Arrests 2016-19, San Francisco",
x = "counts",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
arrest %>%
ggplot(aes(x=year, y=disposition)) +
coord_flip() +
theme_minimal() +
labs(
title="Arrests 2016-19, San Francisco",
x = "counts",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
arrest %>%
ggplot(aes(x=year, y=count)) +
coord_flip() +
theme_minimal() +
labs(
title="Arrests 2016-19, San Francisco",
x = "counts",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
arrest %>%
ggplot(aes(x=year, y=count, weight=1)) +
coord_flip() +
theme_minimal() +
labs(
title="Arrests 2016-19, San Francisco",
x = "counts",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
arrest %>%
ggplot(aes(x=year, y=count, fill = "steelblue")) +
coord_flip() +
theme_minimal() +
labs(
title="Arrests 2016-19, San Francisco",
x = "counts",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
arrest %>%
ggplot(aes(x=year, y=count, fill = "steelblue")) +
geom_bar(stat = "count")
arrest %>%
ggplot(aes(x=year, y=count, fill = "steelblue")) +
geom_bar(stat = "count")
arrest %>%
ggplot() +
geom_bar(aes(x = reorder(year, n), y = count, fill = "steelblue"), stat = "count") +
coord_flip() +
theme_minimal() +
labs(
title = "Arrests 2016-19, San Francisco",
x = "Count",
y = "Year",
caption = "Source: SF PD Service Call Data, 2016-2019"
)
arrest %>%
ggplot() +
geom_bar(aes(x = year, y = count, fill = "steelblue"), stat = "count") +
coord_flip() +
theme_minimal() +
labs(
title = "Arrests 2016-19, San Francisco",
x = "Count",
y = "Year",
caption = "Source: SF PD Service Call Data, 2016-2019"
)
arrest %>%
ggplot() +
geom_bar(aes(x = reorder(year, n), y = count, fill = "steelblue"), stat = "count") +
coord_flip() +
theme_minimal() +
labs(
title = "Arrests 2016-19, San Francisco",
x = "Count",
y = "Year",
caption = "Source: SF PD Service Call Data, 2016-2019"
)
arrest %>%
ggplot() +
geom_bar(aes(x=year, weight=n))
arrest %>%
ggplot() +
geom_bar(aes(x=year, weight=count))
)
arrest %>%
ggplot() +
geom_bar(aes(x=year, weight=count))
)
arrest %>%
ggplot() +
geom_bar(aes(x=year, weight=count))
labs(
title="2016-19 Arrests, San Francisco",
x = "total arrests",
y = "year",
caption = "source: SF PD Service Call Data, 2016-2019")
